export { Assertion, AssertionResult, AssertionSchema, ContainsTextAssertion, ErrorAssertion, IMCPTestClient, JsonPathAssertion, MCPServerInfo, MCPTool, MCPToolResponse, NotContainsTextAssertion, RegexMatchAssertion, ResponseTimeAssertion, SuccessAssertion, TestHarnessConfig, TestResult, TestRunResults, TestRunner, TestSpec, TestSpecSchema, TestSuiteSpecSchema, TestSummary, formatAsJSON, formatSimpleSummary, loadTestSpec, loadTestSuiteSpec, parseTestSpec, printConsole, printJSON, printSimple, runAssertions, serializeTestSpecToJSON, serializeTestSpecToYAML } from './harness/index.js';
import { z } from 'zod';

/**
 * Template System Type Definitions
 *
 * Defines the interfaces and types for the extensible template system.
 */
/**
 * Template runtime environments
 */
type TemplateRuntime = "cloudflare-workers" | "vercel-edge" | "node" | "deno" | string;
/**
 * MCP transport protocols
 */
type TemplateTransport = "sse" | "http" | "stdio" | "websocket" | string;
/**
 * Deployment target
 */
type TemplateDeployment = "remote" | "local";
/**
 * Programming language
 */
type TemplateLanguage = "typescript" | "javascript";
/**
 * Package manager types
 */
type PackageManager = "npm" | "pnpm" | "yarn" | "bun";
/**
 * Template capabilities - describes what the template supports
 */
interface TemplateCapabilities {
    /** Runtime environment (e.g., cloudflare-workers, vercel-edge, node) */
    runtime: TemplateRuntime;
    /** Supported transport protocols */
    transport: TemplateTransport[];
    /** Deployment target (remote or local) */
    deployment: TemplateDeployment;
    /** Programming language */
    language: TemplateLanguage;
}
/**
 * Variable definition for template scaffolding
 */
interface TemplateVariable {
    /** Variable name (uppercase with underscores, e.g., PROJECT_NAME) */
    name: string;
    /** Is this variable required? */
    required: boolean;
    /** Default value (if not required) */
    default?: string;
    /** Prompt text to show user */
    prompt?: string;
    /** Validation pattern (regex) */
    pattern?: string;
}
/**
 * Post-scaffolding configuration
 */
interface PostScaffoldConfig {
    /** Should dependencies be installed automatically? */
    install: boolean;
    /** Custom install command (default: npm install) */
    installCommand?: string;
    /** Commands to run after dependency installation (e.g., cf-typegen) */
    postInstall?: string[];
    /** Smoke test command to run after install */
    smokeTest?: string;
}
/**
 * CLI commands configuration
 */
interface TemplateCLICommands {
    /** Development server command */
    dev: string;
    /** Test command */
    test: string;
    /** Deployment command */
    deploy?: string;
    /** Type check command */
    typeCheck?: string;
}
/**
 * Template features
 */
interface TemplateFeatures {
    /** Includes unit testing setup */
    unitTesting: boolean;
    /** Includes integration testing setup */
    integrationTesting: boolean;
    /** List of example tools included */
    exampleTools: string[];
    /** Includes documentation */
    documentation: boolean;
}
/**
 * Compatibility requirements
 */
interface TemplateCompatibility {
    /** Minimum Node.js version (e.g., ">=18.0.0") */
    node?: string;
    /** Minimum npm version */
    npm?: string;
    /** Minimum pnpm version */
    pnpm?: string;
    /** Minimum yarn version */
    yarn?: string;
}
/**
 * Template dependency versions
 */
interface TemplateDependencies {
    /** MCP SDK version */
    mcp_sdk?: string;
    /** Agents package version (for Cloudflare) */
    agents?: string;
    /** Runtime-specific dependencies */
    runtime_specific?: Record<string, string>;
}
/**
 * Complete template configuration
 */
interface TemplateConfig {
    /** Unique template ID (e.g., "cloudflare-remote") */
    id: string;
    /** Template version (semver) */
    version: string;
    /** Human-readable name */
    name: string;
    /** Template description */
    description: string;
    /** Template capabilities */
    capabilities: TemplateCapabilities;
    /** Dependency versions */
    dependencies: TemplateDependencies;
    /** Scaffolding configuration */
    scaffolding: {
        /** Variable definitions */
        variables: TemplateVariable[];
        /** Post-scaffold actions */
        postScaffold?: PostScaffoldConfig;
    };
    /** CLI commands */
    cli: TemplateCLICommands;
    /** Template features */
    features: TemplateFeatures;
    /** Compatibility requirements */
    compatibility: TemplateCompatibility;
}
/**
 * Template instance (config + file paths)
 */
interface Template {
    /** Template configuration */
    config: TemplateConfig;
    /** Absolute path to template directory */
    path: string;
    /** Absolute path to files directory */
    filesPath: string;
    /** Absolute path to hooks directory (optional) */
    hooksPath?: string;
}
/**
 * Scaffolding options
 */
interface ScaffoldOptions {
    /** Template ID to use */
    template: string;
    /** Target directory for scaffolding */
    targetDir: string;
    /** Variable values (key-value pairs) */
    variables: Record<string, string>;
    /** Skip dependency installation */
    noInstall?: boolean;
    /** Package manager to use */
    packageManager?: PackageManager;
    /** Run smoke test after install */
    smokeTest?: boolean;
}
/**
 * Scaffolding result
 */
interface ScaffoldResult {
    /** Was scaffolding successful? */
    success: boolean;
    /** Template ID that was used */
    template: string;
    /** Path where project was scaffolded */
    path: string;
    /** Error message (if failed) */
    error?: string;
}
/**
 * Scaffold metadata (written to .mcp-template.json)
 */
interface ScaffoldMetadata {
    /** Template ID */
    id: string;
    /** Template version */
    version: string;
    /** Template name */
    name: string;
    /** MCP SDK version */
    mcp_sdk_version?: string;
    /** Agents version (Cloudflare) */
    agents_version?: string;
    /** Timestamp when scaffolded */
    scaffolded_at: string;
    /** Variables used during scaffolding */
    variables: Record<string, string>;
}
/**
 * Template validation result
 */
interface TemplateValidationResult {
    /** Is template valid? */
    valid: boolean;
    /** Validation errors */
    errors: string[];
    /** Validation warnings */
    warnings: string[];
}
/**
 * Template filter criteria
 */
interface TemplateFilter {
    /** Filter by runtime */
    runtime?: TemplateRuntime;
    /** Filter by transport */
    transport?: TemplateTransport;
    /** Filter by deployment target */
    deployment?: TemplateDeployment;
    /** Filter by language */
    language?: TemplateLanguage;
}

/**
 * Template Registry
 *
 * Discovers, validates, and manages templates.
 */

/**
 * Template Registry - discovers and validates templates
 */
declare class TemplateRegistry {
    private templatesDir;
    private templatesCache;
    constructor(templatesDir?: string);
    /**
     * Discover all templates in the templates directory
     */
    discoverTemplates(): Promise<TemplateConfig[]>;
    /**
     * Get a specific template by ID
     */
    getTemplate(id: string): Promise<Template>;
    /**
     * Validate a specific template
     */
    validateTemplate(id: string): Promise<TemplateValidationResult>;
    /**
     * List all templates with optional filtering
     */
    listTemplates(filter?: TemplateFilter): Promise<TemplateConfig[]>;
    /**
     * Check if a template exists
     */
    templateExists(id: string): Promise<boolean>;
    /**
     * Get template capabilities (for filtering/discovery)
     */
    getCapabilities(): Promise<{
        runtimes: Set<string>;
        transports: Set<string>;
        deployments: Set<string>;
        languages: Set<string>;
    }>;
    /**
     * Clear templates cache
     */
    clearCache(): void;
}

/**
 * Template Processor
 *
 * Handles scaffolding projects from templates:
 * - Variable substitution
 * - File copying
 * - Hook execution
 * - Dependency installation
 */

/**
 * Template Processor - scaffolds projects from templates
 */
declare class TemplateProcessor {
    private registry;
    constructor(registry: TemplateRegistry);
    /**
     * Scaffold a project from a template
     */
    scaffold(options: ScaffoldOptions): Promise<ScaffoldResult>;
    /**
     * Validate and merge variables with defaults
     */
    private validateVariables;
    /**
     * Copy template files to target directory with variable substitution
     */
    private copyTemplateFiles;
    /**
     * Recursively copy directory with variable substitution
     */
    private copyDirectoryRecursive;
    /**
     * Process a single file (with or without Handlebars templating)
     */
    private processFile;
    /**
     * Run a template hook
     */
    private runHook;
    /**
     * Install dependencies
     */
    private installDependencies;
    /**
     * Run post-install commands
     */
    private runPostInstallCommands;
    /**
     * Get install command for package manager
     */
    private getInstallCommand;
    /**
     * Run smoke test
     */
    private runSmokeTest;
    /**
     * Write scaffold metadata to .mcp-template.json
     */
    private writeMetadata;
}

/**
 * Zod Validation Schemas for Template System
 *
 * Runtime validation for template configurations.
 */

/**
 * Complete template configuration schema
 */
declare const TemplateConfigSchema: z.ZodObject<{
    id: z.ZodString;
    version: z.ZodString;
    name: z.ZodString;
    description: z.ZodString;
    capabilities: z.ZodObject<{
        runtime: z.ZodString;
        transport: z.ZodArray<z.ZodString, "many">;
        deployment: z.ZodEnum<["remote", "local"]>;
        language: z.ZodEnum<["typescript", "javascript"]>;
    }, "strip", z.ZodTypeAny, {
        runtime: string;
        transport: string[];
        deployment: "remote" | "local";
        language: "typescript" | "javascript";
    }, {
        runtime: string;
        transport: string[];
        deployment: "remote" | "local";
        language: "typescript" | "javascript";
    }>;
    dependencies: z.ZodObject<{
        mcp_sdk: z.ZodOptional<z.ZodString>;
        agents: z.ZodOptional<z.ZodString>;
        runtime_specific: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodString>>;
    }, "strip", z.ZodTypeAny, {
        mcp_sdk?: string | undefined;
        agents?: string | undefined;
        runtime_specific?: Record<string, string> | undefined;
    }, {
        mcp_sdk?: string | undefined;
        agents?: string | undefined;
        runtime_specific?: Record<string, string> | undefined;
    }>;
    scaffolding: z.ZodObject<{
        variables: z.ZodArray<z.ZodObject<{
            name: z.ZodString;
            required: z.ZodBoolean;
            default: z.ZodOptional<z.ZodString>;
            prompt: z.ZodOptional<z.ZodString>;
            pattern: z.ZodOptional<z.ZodString>;
        }, "strip", z.ZodTypeAny, {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }, {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }>, "many">;
        postScaffold: z.ZodOptional<z.ZodObject<{
            install: z.ZodBoolean;
            installCommand: z.ZodOptional<z.ZodString>;
            postInstall: z.ZodOptional<z.ZodArray<z.ZodString, "many">>;
            smokeTest: z.ZodOptional<z.ZodString>;
        }, "strip", z.ZodTypeAny, {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        }, {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        }>>;
    }, "strip", z.ZodTypeAny, {
        variables: {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }[];
        postScaffold?: {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        } | undefined;
    }, {
        variables: {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }[];
        postScaffold?: {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        } | undefined;
    }>;
    cli: z.ZodObject<{
        dev: z.ZodString;
        test: z.ZodString;
        deploy: z.ZodOptional<z.ZodString>;
        typeCheck: z.ZodOptional<z.ZodString>;
    }, "strip", z.ZodTypeAny, {
        dev: string;
        test: string;
        deploy?: string | undefined;
        typeCheck?: string | undefined;
    }, {
        dev: string;
        test: string;
        deploy?: string | undefined;
        typeCheck?: string | undefined;
    }>;
    features: z.ZodObject<{
        unitTesting: z.ZodBoolean;
        integrationTesting: z.ZodBoolean;
        exampleTools: z.ZodArray<z.ZodString, "many">;
        documentation: z.ZodBoolean;
    }, "strip", z.ZodTypeAny, {
        unitTesting: boolean;
        integrationTesting: boolean;
        exampleTools: string[];
        documentation: boolean;
    }, {
        unitTesting: boolean;
        integrationTesting: boolean;
        exampleTools: string[];
        documentation: boolean;
    }>;
    compatibility: z.ZodObject<{
        node: z.ZodOptional<z.ZodString>;
        npm: z.ZodOptional<z.ZodString>;
        pnpm: z.ZodOptional<z.ZodString>;
        yarn: z.ZodOptional<z.ZodString>;
    }, "strip", z.ZodTypeAny, {
        node?: string | undefined;
        npm?: string | undefined;
        pnpm?: string | undefined;
        yarn?: string | undefined;
    }, {
        node?: string | undefined;
        npm?: string | undefined;
        pnpm?: string | undefined;
        yarn?: string | undefined;
    }>;
}, "strip", z.ZodTypeAny, {
    name: string;
    description: string;
    id: string;
    version: string;
    capabilities: {
        runtime: string;
        transport: string[];
        deployment: "remote" | "local";
        language: "typescript" | "javascript";
    };
    dependencies: {
        mcp_sdk?: string | undefined;
        agents?: string | undefined;
        runtime_specific?: Record<string, string> | undefined;
    };
    scaffolding: {
        variables: {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }[];
        postScaffold?: {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        } | undefined;
    };
    cli: {
        dev: string;
        test: string;
        deploy?: string | undefined;
        typeCheck?: string | undefined;
    };
    features: {
        unitTesting: boolean;
        integrationTesting: boolean;
        exampleTools: string[];
        documentation: boolean;
    };
    compatibility: {
        node?: string | undefined;
        npm?: string | undefined;
        pnpm?: string | undefined;
        yarn?: string | undefined;
    };
}, {
    name: string;
    description: string;
    id: string;
    version: string;
    capabilities: {
        runtime: string;
        transport: string[];
        deployment: "remote" | "local";
        language: "typescript" | "javascript";
    };
    dependencies: {
        mcp_sdk?: string | undefined;
        agents?: string | undefined;
        runtime_specific?: Record<string, string> | undefined;
    };
    scaffolding: {
        variables: {
            name: string;
            required: boolean;
            prompt?: string | undefined;
            pattern?: string | undefined;
            default?: string | undefined;
        }[];
        postScaffold?: {
            install: boolean;
            installCommand?: string | undefined;
            postInstall?: string[] | undefined;
            smokeTest?: string | undefined;
        } | undefined;
    };
    cli: {
        dev: string;
        test: string;
        deploy?: string | undefined;
        typeCheck?: string | undefined;
    };
    features: {
        unitTesting: boolean;
        integrationTesting: boolean;
        exampleTools: string[];
        documentation: boolean;
    };
    compatibility: {
        node?: string | undefined;
        npm?: string | undefined;
        pnpm?: string | undefined;
        yarn?: string | undefined;
    };
}>;
/**
 * Scaffold options schema
 */
declare const ScaffoldOptionsSchema: z.ZodObject<{
    template: z.ZodString;
    targetDir: z.ZodString;
    variables: z.ZodRecord<z.ZodString, z.ZodString>;
    noInstall: z.ZodOptional<z.ZodBoolean>;
    packageManager: z.ZodOptional<z.ZodEnum<["npm", "pnpm", "yarn", "bun"]>>;
    smokeTest: z.ZodOptional<z.ZodBoolean>;
}, "strip", z.ZodTypeAny, {
    variables: Record<string, string>;
    template: string;
    targetDir: string;
    smokeTest?: boolean | undefined;
    noInstall?: boolean | undefined;
    packageManager?: "npm" | "pnpm" | "yarn" | "bun" | undefined;
}, {
    variables: Record<string, string>;
    template: string;
    targetDir: string;
    smokeTest?: boolean | undefined;
    noInstall?: boolean | undefined;
    packageManager?: "npm" | "pnpm" | "yarn" | "bun" | undefined;
}>;
/**
 * Template filter schema
 */
declare const TemplateFilterSchema: z.ZodObject<{
    runtime: z.ZodOptional<z.ZodString>;
    transport: z.ZodOptional<z.ZodString>;
    deployment: z.ZodOptional<z.ZodEnum<["remote", "local"]>>;
    language: z.ZodOptional<z.ZodEnum<["typescript", "javascript"]>>;
}, "strip", z.ZodTypeAny, {
    runtime?: string | undefined;
    transport?: string | undefined;
    deployment?: "remote" | "local" | undefined;
    language?: "typescript" | "javascript" | undefined;
}, {
    runtime?: string | undefined;
    transport?: string | undefined;
    deployment?: "remote" | "local" | undefined;
    language?: "typescript" | "javascript" | undefined;
}>;
/**
 * Validation helper: Parse and validate template config
 */
declare function validateTemplateConfig(config: unknown): {
    success: boolean;
    data?: z.infer<typeof TemplateConfigSchema>;
    errors?: z.ZodError;
};
/**
 * Validation helper: Parse and validate scaffold options
 */
declare function validateScaffoldOptions(options: unknown): {
    success: boolean;
    data?: z.infer<typeof ScaffoldOptionsSchema>;
    errors?: z.ZodError;
};

/**
 * Convert JSON Schema to Zod schema for validation
 * Supports OpenAPI 3.0 JSON Schema subset
 */

/**
 * Convert a JSON Schema to a Zod schema
 */
declare function jsonSchemaToZod(schema: any): z.ZodTypeAny;
/**
 * Get a human-readable error message for a Zod issue
 */
declare function getZodErrorMessage(issue: z.ZodIssue, schema: any): string;

/**
 * Generate example payloads from JSON schemas
 */
declare class ExampleGenerator {
    private static readonly MAX_DEPTH;
    /**
     * Generate example payload from JSON schema
     */
    static generate(schema: any, options?: {
        requiredOnly?: boolean;
        depth?: number;
    }): any;
    /**
     * Generate example object
     */
    private static generateObject;
    /**
     * Sanitize property name to ensure it's valid for JSON
     */
    private static sanitizePropertyName;
    /**
     * Generate example array
     */
    private static generateArray;
    /**
     * Generate example string
     */
    private static generateString;
    /**
     * Generate formatted string
     */
    private static generateFormattedString;
    /**
     * Generate string matching a pattern
     */
    private static generatePatternString;
    /**
     * Generate example number
     */
    private static generateNumber;
    /**
     * Generate example boolean
     */
    private static generateBoolean;
}

/**
 * MCP Tools Type Definitions
 *
 * Common types used across MCP tools and utilities
 */
/**
 * Validation error structure
 */
interface ValidationError {
    field: string;
    message: string;
    expected?: unknown;
    received?: unknown;
    fixSuggestion?: string;
}
/**
 * Validation warning structure
 */
interface ValidationWarning {
    field: string;
    message: string;
    suggestion?: string;
}
/**
 * Validation result
 */
interface ValidationResult {
    valid: boolean;
    errors: ValidationError[];
    warnings?: ValidationWarning[];
}

/**
 * Utility for formatting validation errors for user-friendly display
 */

declare class ErrorFormatter {
    /**
     * Format validation errors into a readable text summary
     */
    static formatErrors(errors: ValidationError[]): string;
    /**
     * Format validation warnings into a readable text summary
     */
    static formatWarnings(warnings: ValidationWarning[]): string;
    /**
     * Format complete validation result
     */
    static formatValidationResult(result: {
        valid: boolean;
        errors: ValidationError[];
        warnings?: ValidationWarning[];
    }): string;
}

/**
 * LRU Cache with TTL for OpenAPI specs and metadata
 */
declare class LRUCache<T> {
    private cache;
    private readonly maxSize;
    private readonly ttlMs;
    constructor(maxSize?: number, ttlMinutes?: number);
    get(key: string): T | null;
    set(key: string, value: T): void;
    has(key: string): boolean;
    delete(key: string): void;
    clear(): void;
    size(): number;
    keys(): string[];
    cleanup(): number;
}

/**
 * MCP Server Kit - Main Package Entry Point
 *
 * Extensible scaffolding tool and test harness for Model Context Protocol servers.
 */

declare const VERSION = "1.0.0";
declare const NAME = "mcp-server-kit";

export { ErrorFormatter, ExampleGenerator, LRUCache, NAME, type PackageManager, type ScaffoldMetadata, type ScaffoldOptions, ScaffoldOptionsSchema, type ScaffoldResult, type Template, type TemplateCapabilities, type TemplateConfig, TemplateConfigSchema, type TemplateDeployment, type TemplateFilter, TemplateFilterSchema, TemplateProcessor, TemplateRegistry, type TemplateRuntime, type TemplateTransport, type TemplateValidationResult, type TemplateVariable, VERSION, type ValidationError, type ValidationResult, type ValidationWarning, getZodErrorMessage, jsonSchemaToZod, validateScaffoldOptions, validateTemplateConfig };
