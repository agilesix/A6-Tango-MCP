name: "API Test - Lookup Tango Agency"
description: "Verify lookup_tango_agency returns matching agency data with forecast availability (1-2 API calls)"
tool: "lookup_tango_agency"
arguments:
  query: "HHS"

assertions:
  - type: "success"
  - type: "response_time_ms"
    max: 10000
  - type: "json_path"
    path: "$.data"
    expected_type: "array"
  - type: "json_path"
    path: "$.returned"
    expected_type: "number"
  - type: "json_path"
    path: "$.execution.cached"
    expected_type: "boolean"
  - type: "json_path"
    path: "$.data[0].has_forecasts"
    expected_type: "boolean"
  - type: "json_path"
    path: "$.execution.forecast_discovery_cached"
    expected_type: "boolean"
  - type: "json_path"
    path: "$.execution.agencies_with_forecasts"
    expected_type: "number"
  - type: "json_path"
    path: "$.data[0].code"
    expected_type: "string"
  - type: "json_path"
    path: "$.data[0].name"
    expected_type: "string"
