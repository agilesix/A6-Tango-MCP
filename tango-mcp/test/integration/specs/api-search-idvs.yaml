name: "API Test - Search IDVs"
description: "Verify search_tango_idvs returns IDV data with filters (1 API call)"
tool: "search_tango_idvs"
arguments:
  query: "GSA"
  limit: 10

assertions:
  - type: "success"
  - type: "response_time_ms"
    max: 10000
  - type: "json_path"
    path: "$.data"
    expected_type: "array"
  - type: "json_path"
    path: "$.returned"
    expected_type: "number"
  - type: "json_path"
    path: "$.total"
    expected_type: "number"
  - type: "json_path"
    path: "$.filters.query"
    expected: "GSA"
  - type: "json_path"
    path: "$.execution.cached"
    expected_type: "boolean"
  - type: "json_path"
    path: "$.pagination.limit"
    expected: 10
  - type: "json_path"
    path: "$.pagination.has_more"
    expected_type: "boolean"
  - type: "json_path"
    path: "$.data[0].idv_id"
    expected_type: "string"
  - type: "json_path"
    path: "$.data[0].vendor.name"
    expected_type: "string"
  - type: "json_path"
    path: "$.data[0].agency.name"
    expected_type: "string"
  - type: "json_path"
    path: "$.data[0].idv_type.code"
    expected_type: "string"
